{% extends 'layout.html' %}
{% block title %}AnÃ¡lisis del Documento ClÃ­nico{% endblock %}
{% block contenido %} 
<div class="container mt-4">

  <h2 class="text-center text-primary mb-4">ğŸ“‹ AnÃ¡lisis del Documento ClÃ­nico</h2>

  <!-- InformaciÃ³n del Paciente -->
  {% if paciente %}
  <div class="card mb-4 border-info shadow">
    <div class="card-body">
      <h5 class="card-title text-info">ğŸ§‘â€âš•ï¸ Paciente:</h5>
      <p class="card-text">
        <strong>Nombre:</strong> {{ paciente.nombres }} {{ paciente.apellidos }}<br>
        <strong>ID:</strong> {{ paciente.id_paciente }}
      </p>
    </div>
  </div>
  {% endif %}

  <!-- InformaciÃ³n del Documento -->
  {% if documento %}
  <div class="card mb-4 border-secondary shadow">
    <div class="card-body">
      <h5 class="card-title text-secondary">ğŸ“„ Documento Analizado:</h5>
      <p class="card-text">
        <strong>Nombre del archivo:</strong> {{ documento.ruta_documento.split('/')[-1] }}<br>
        <strong>Fecha de subida:</strong> {{ documento.fecha_subida.strftime('%d/%m/%Y') }}
      </p>
    </div>
  </div>
  {% endif %}

  <!-- AnÃ¡lisis generado -->
  <div class="card border-success shadow">
    <div class="card-header bg-success text-white">
      ğŸ§  Resultado del AnÃ¡lisis ClÃ­nico con Gemini
    </div>
    <div class="card-body">
      {% if analisis %}
        <pre style="white-space: pre-wrap;">{{ analisis }}</pre>
      {% else %}
        <p class="text-muted">No se encontrÃ³ anÃ¡lisis generado para este documento.</p>
      {% endif %}
    </div>
  </div>

  <div class="text-center mt-4">
    <a href="{{ url_for('main.historial') }}" class="btn btn-outline-primary">ğŸ”™ Volver al Historial</a>
  </div>

</div>
{% endblock %}